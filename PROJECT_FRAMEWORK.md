# 🏗️ 教务排课表系统 - 整体框架

## 📋 项目概述

我已经为您搭建了一个完整的教务排课表系统框架，按照您的需求实现了分步骤的项目构建流程。

## 🎯 核心设计理念

### 1. **分步骤构建**
- 项目创建 → 班级设置 → 课表格式 → 科目设置 → 教师设置 → 教室设置 → 课程需求 → 自动排课 → 手动调整 → 导出

### 2. **多视图支持**
- 项目管理视图
- 项目配置向导
- 课程表查看视图

### 3. **灵活的导出系统**
- 班级课程表
- 教师课程表
- 教室课程表
- 总课程表

## 📁 项目结构

```
src/
├── types/
│   └── index.ts              # 核心数据类型定义
├── views/
│   ├── ProjectManager.tsx    # 项目管理主界面
│   ├── ProjectWizard.tsx     # 项目配置向导
│   ├── TimetableView.tsx     # 课程表查看界面
│   └── steps/                # 配置步骤组件
│       ├── ClassSetup.tsx    # 班级设置（已完成）
│       ├── FormatSetup.tsx   # 课表格式设置（已完成）
│       └── index.ts          # 其他步骤组件（占位符）
├── components/
│   └── timetables/           # 课程表展示组件
│       └── index.tsx         # 各种课程表组件（占位符）
├── services/
│   └── projectService.ts    # 项目数据服务
├── App_new.tsx              # 新的主应用组件
└── App.tsx                  # 原有应用组件（保留）
```

## 🔧 核心功能模块

### 1. **项目管理**
- ✅ 创建、编辑、删除项目
- ✅ 项目列表展示
- ✅ 项目进度跟踪
- ✅ 项目状态管理

### 2. **配置向导**
- ✅ 步骤式配置流程
- ✅ 班级设置（完整实现）
- ✅ 课表格式设置（完整实现）
- 🔄 科目设置（框架已搭建）
- 🔄 教师设置（框架已搭建）
- 🔄 教室设置（框架已搭建）
- 🔄 课程需求设置（框架已搭建）
- 🔄 自动排课（框架已搭建）
- 🔄 手动调整（框架已搭建）
- 🔄 导出功能（框架已搭建）

### 3. **课程表系统**
- ✅ 多视图支持（班级、教师、教室、总表）
- ✅ 导出配置系统
- 🔄 课程表渲染（框架已搭建）

## 📊 数据模型

### 核心实体
- **ProjectState**: 项目状态管理
- **ClassInfo**: 班级信息
- **Teacher**: 教师信息
- **Subject**: 科目信息
- **Room**: 教室信息
- **Course**: 课程信息（排课结果）
- **CourseRequirement**: 课程需求（排课前）

### 配置类型
- **TimetableFormat**: 课表格式配置
- **ExportConfig**: 导出配置
- **TimetableViewConfig**: 课程表视图配置

## 🚀 使用流程

### 1. **启动应用**
```bash
# 使用新的框架
mv src/App.tsx src/App_old.tsx
mv src/App_new.tsx src/App.tsx

# 启动应用
npm run dev
```

### 2. **创建项目**
1. 点击"新建项目"
2. 输入项目名称
3. 自动进入配置向导

### 3. **配置项目**
1. **班级设置**: 添加学校的班级信息
2. **课表格式**: 设置课程表的基本格式
3. **科目设置**: 配置教学科目（待实现）
4. **教师设置**: 配置教师信息（待实现）
5. **教室设置**: 配置教室信息（待实现）
6. **课程需求**: 设置各班级的课程需求（待实现）
7. **自动排课**: 执行自动排课算法（待实现）
8. **手动调整**: 微调排课结果（待实现）
9. **导出**: 导出各种格式的课程表（待实现）

### 4. **查看课程表**
- 完成配置后自动跳转到课程表视图
- 支持多种视图切换
- 支持导出功能

## 🔄 下一步开发计划

### 第一优先级（核心功能）
1. **完善科目设置**
   - 科目CRUD操作
   - 科目分类管理
   - 颜色配置

2. **完善教师设置**
   - 教师CRUD操作
   - 教学能力配置
   - 工作量限制

3. **完善教室设置**
   - 教室CRUD操作
   - 教室类型管理
   - 容量配置

### 第二优先级（排课算法）
1. **课程需求设置**
   - 班级-科目-教师关联
   - 课时需求配置
   - 约束条件设置

2. **自动排课算法**
   - 基础排课算法
   - 冲突检测
   - 优化算法

### 第三优先级（用户体验）
1. **手动调整功能**
   - 拖拽调整
   - 冲突提示
   - 批量操作

2. **导出功能**
   - PDF导出
   - Excel导出
   - 打印功能

## 💡 技术特点

### 1. **模块化设计**
- 清晰的组件分层
- 可复用的业务逻辑
- 易于扩展的架构

### 2. **类型安全**
- 完整的TypeScript支持
- 严格的类型检查
- 良好的开发体验

### 3. **状态管理**
- 项目级状态管理
- 步骤间数据传递
- 持久化存储

### 4. **用户体验**
- 直观的向导流程
- 实时的进度反馈
- 友好的错误处理

## 🎉 框架优势

1. **渐进式开发**: 可以逐步完善各个功能模块
2. **清晰的架构**: 易于理解和维护
3. **可扩展性**: 支持后续功能扩展
4. **用户友好**: 符合用户使用习惯
5. **数据安全**: 完整的数据验证和错误处理

现在您可以基于这个框架，逐步完善各个功能模块。每个步骤都有清晰的接口定义，可以独立开发和测试。
